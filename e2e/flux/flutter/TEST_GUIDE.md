# Flux Flutter é›†æˆæµ‹è¯•è¿è¡ŒæŒ‡å—

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

å·²åˆ›å»ºå®Œæ•´çš„é›†æˆæµ‹è¯•å¥—ä»¶ï¼Œå…± **31 ä¸ªæµ‹è¯•ç”¨ä¾‹**ï¼š

| æµ‹è¯•ç±»å‹ | æ•°é‡ | çŠ¶æ€ |
|---------|------|------|
| Golden æµ‹è¯• | 11 | âœ… å…¨éƒ¨é€šè¿‡ |
| é›†æˆæµ‹è¯• | 20 | â³ å¾…éªŒè¯ |

## ğŸ“ æµ‹è¯•æ–‡ä»¶ç»“æ„

```
e2e/flux/flutter/integration_test/
â”œâ”€â”€ test_helper.dart              # æµ‹è¯•è¾…åŠ©å·¥å…·
â”œâ”€â”€ login_flow_test.dart          # ç™»å½•æµç¨‹æµ‹è¯•ï¼ˆ4ä¸ªç”¨ä¾‹ï¼‰
â”œâ”€â”€ tab_navigation_test.dart      # Tabå¯¼èˆªæµ‹è¯•ï¼ˆ4ä¸ªç”¨ä¾‹ï¼‰
â”œâ”€â”€ compose_flow_test.dart        # å‘å¸–æµç¨‹æµ‹è¯•ï¼ˆ4ä¸ªç”¨ä¾‹ï¼‰
â”œâ”€â”€ me_settings_test.dart         # Meé¡µé¢å’Œè®¾ç½®æµ‹è¯•ï¼ˆ6ä¸ªç”¨ä¾‹ï¼‰
â””â”€â”€ user_journey_test.dart        # å®Œæ•´ç”¨æˆ·æ—…ç¨‹æµ‹è¯•ï¼ˆ2ä¸ªç”¨ä¾‹ï¼‰
```

## ğŸš€ è¿è¡Œæµ‹è¯•

### 1. Golden æµ‹è¯•ï¼ˆå·²éªŒè¯é€šè¿‡ï¼‰

```bash
cd e2e/flux/flutter
flutter test test/flux_pages_golden_test.dart
```

**é¢„æœŸè¾“å‡º**:
```
00:01 +11: All tests passed!
```

### 2. é›†æˆæµ‹è¯•

#### æ–¹å¼ä¸€ï¼šè¿è¡Œæ‰€æœ‰é›†æˆæµ‹è¯•
```bash
cd e2e/flux/flutter
flutter test integration_test/ -d macos
```

#### æ–¹å¼äºŒï¼šè¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
```bash
# ç™»å½•æµç¨‹æµ‹è¯•
flutter test integration_test/login_flow_test.dart -d macos

# Tabå¯¼èˆªæµ‹è¯•
flutter test integration_test/tab_navigation_test.dart -d macos

# å‘å¸–æµç¨‹æµ‹è¯•
flutter test integration_test/compose_flow_test.dart -d macos

# Meé¡µé¢å’Œè®¾ç½®æµ‹è¯•
flutter test integration_test/me_settings_test.dart -d macos

# å®Œæ•´ç”¨æˆ·æ—…ç¨‹æµ‹è¯•
flutter test integration_test/user_journey_test.dart -d macos
```

## ğŸ“ æµ‹è¯•ç”¨ä¾‹è¯¦æƒ…

### ç™»å½•æµç¨‹æµ‹è¯• (login_flow_test.dart)

| ç”¨ä¾‹ | æè¿° | é¢„æœŸç»“æœ |
|------|------|----------|
| 1.1 | æ­£å¸¸ç™»å½• alice/password | è¿›å…¥ä¸»ç•Œé¢ï¼Œæ˜¾ç¤ºTab Bar |
| 1.2 | é”™è¯¯å¯†ç ç™»å½• | æ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œåœç•™åœ¨ç™»å½•é¡µ |
| 1.3 | ç©ºè¾“å…¥éªŒè¯ | ç™»å½•æŒ‰é’®ç¦ç”¨ |
| 1.4 | ä¸å­˜åœ¨ç”¨æˆ·ç™»å½• | æ˜¾ç¤ºé”™è¯¯æç¤º |

### Tabå¯¼èˆªæµ‹è¯• (tab_navigation_test.dart)

| ç”¨ä¾‹ | æè¿° | é¢„æœŸç»“æœ |
|------|------|----------|
| 2.1 | éå†æ‰€æœ‰Tab | Home/Search/Inbox/Me æ­£å¸¸åˆ‡æ¢ |
| 2.2 | Home Tabæ˜¾ç¤ºæ—¶é—´çº¿ | æ˜¾ç¤ºæ¨æ–‡åˆ—è¡¨ |
| 2.3 | Me Tabæ˜¾ç¤ºç”¨æˆ·ç»Ÿè®¡ | æ˜¾ç¤ºfollowers/following/tweets |
| 2.4 | Inboxæ˜¾ç¤ºæœªè¯»æ¶ˆæ¯ | æ˜¾ç¤ºæ¶ˆæ¯åˆ—è¡¨å’Œæœªè¯»æ ‡è®° |

### å‘å¸–æµç¨‹æµ‹è¯• (compose_flow_test.dart)

| ç”¨ä¾‹ | æè¿° | é¢„æœŸç»“æœ |
|------|------|----------|
| 3.1 | æˆåŠŸå‘å¸– | è¿”å›Homeï¼Œå¸–å­å¯è§ |
| 3.2 | ç©ºå†…å®¹å‘å¸– | PostæŒ‰é’®ç¦ç”¨ |
| 3.3 | å­—ç¬¦é™åˆ¶éªŒè¯ | 280å­—ç¬¦é™åˆ¶ï¼Œè¶…å‡ºç¦ç”¨Post |
| 3.4 | å–æ¶ˆå‘å¸– | è¿”å›Homeï¼Œä¸ä¿å­˜è‰ç¨¿ |

### Meé¡µé¢å’Œè®¾ç½®æµ‹è¯• (me_settings_test.dart)

| ç”¨ä¾‹ | æè¿° | é¢„æœŸç»“æœ |
|------|------|----------|
| 5.1 | æŸ¥çœ‹ç”¨æˆ·èµ„æ–™ | æ˜¾ç¤ºAlice/@alice/ç»Ÿè®¡ä¿¡æ¯ |
| 5.2 | é€€å‡ºç™»å½• | è¿”å›ç™»å½•é¡µé¢ |
| 6.1 | è¿›å…¥è¯­è¨€é€‰æ‹©é¡µ | æ˜¾ç¤ºè¯­è¨€é€‰é¡¹ |
| 6.2 | åˆ‡æ¢åˆ°ä¸­æ–‡ | ç•Œé¢è¯­è¨€åˆ‡æ¢ |
| 6.3 | è¿›å…¥ç¼–è¾‘èµ„æ–™é¡µ | å¯¼èˆªæ­£å¸¸ |
| 6.4 | è¿›å…¥ä¿®æ”¹å¯†ç é¡µ | å¯¼èˆªæ­£å¸¸ |

### å®Œæ•´ç”¨æˆ·æ—…ç¨‹æµ‹è¯• (user_journey_test.dart)

| ç”¨ä¾‹ | æè¿° | é¢„æœŸç»“æœ |
|------|------|----------|
| 7.1 | å…¨é“¾è·¯æ—…ç¨‹ | ç™»å½•â†’Tabéå†â†’å‘å¸–â†’è¯­è¨€â†’é€€å‡º |
| 7.2 | å¿«é€Ÿå†’çƒŸæµ‹è¯• | æ ¸å¿ƒæµç¨‹å¿«é€ŸéªŒè¯ |

## âš ï¸ å·²çŸ¥é—®é¢˜

### é—®é¢˜ 1: é›†æˆæµ‹è¯•è¿è¡Œæ—¶é—´è¾ƒé•¿
- **æè¿°**: åœ¨ macOS æ¡Œé¢è¿è¡Œå®Œæ•´é›†æˆæµ‹è¯•å¥—ä»¶å¯èƒ½éœ€è¦ 5 åˆ†é’Ÿä»¥ä¸Š
- **åŸå› **: 
  - éœ€è¦ç¼–è¯‘ macOS åº”ç”¨
  - åŒ…å«å®Œæ•´ç”¨æˆ·äº¤äº’æµç¨‹
- **å»ºè®®**: 
  - åœ¨ CI ç¯å¢ƒä¸­è¿è¡Œ
  - æˆ–åˆ†æ‰¹æ¬¡è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜: "No supported devices connected"
**è§£å†³æ–¹æ¡ˆ**:
```bash
# åˆ—å‡ºå¯ç”¨è®¾å¤‡
flutter devices

# ä½¿ç”¨å¯ç”¨è®¾å¤‡è¿è¡Œ
flutter test integration_test/ -d <device_id>
```

### é—®é¢˜: æµ‹è¯•è¶…æ—¶
**è§£å†³æ–¹æ¡ˆ**:
```bash
# å¢åŠ è¶…æ—¶æ—¶é—´
flutter test integration_test/ --timeout=10m
```

### é—®é¢˜: æµ‹è¯•å¤±è´¥
**è°ƒè¯•æ­¥éª¤**:
1. è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶å®šä½é—®é¢˜
2. æ·»åŠ  `--verbose` æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
3. æ£€æŸ¥æµ‹è¯•ä»£ç ä¸­çš„æ–­è¨€æ¡ä»¶

## âœ… éªŒæ”¶æ ‡å‡†

- [ ] Golden æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼ˆ11/11ï¼‰
- [ ] é›†æˆæµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼ˆ20/20ï¼‰
- [ ] æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹åœ¨ CI ç¯å¢ƒä¸­å¯é‡å¤è¿è¡Œ
- [ ] æµ‹è¯•æ–‡æ¡£å·²æ›´æ–°

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰æµ‹è¯•ç›¸å…³é—®é¢˜ï¼Œè¯·è”ç³»:
- **Tester**: è´Ÿè´£æµ‹è¯•ä»£ç å’ŒéªŒè¯
- **Developer**: è´Ÿè´£ä¿®å¤æµ‹è¯•å‘ç°çš„ä»£ç é—®é¢˜
